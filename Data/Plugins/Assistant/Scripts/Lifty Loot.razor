# Open own corpse and auto loot your loot by Jaseowns
# UO Outlands
####
##  Requirements:
##  Use control shift o organizer to setup your gear.
##  https://outlands.uorazorscripts.com/script/11fd0082-1e79-4aa8-8015-b62fac929481
#######
##  48 hour stream, we the best.
####
@setvar! globalTimeout 650
@setvar! automaticallyActivateAspect 1

@clearignore 
while findtype "corpse|bones" ground -1 -1 2 as jorpse
    getlabel jorpse desc
    if name in desc
        overhead "This is our corpse"
        dclick jorpse
        wait globalTimeout
    endif
    @ignore jorpse
endwhile
@clearignore 

if not varexist jootbag
    overhead "I dunno your loot bag - use control shift o" 34
    stop
endif

if not find jootbag backpack
    overhead "Not in our bag bro" 34
    hotkey "Grab Item"
    wft 500
    target jootbag
    wait globalTimeout
endif

if jase_righthand != 0 and not find jase_righthand self
    // handle crooky 
    dclick jase_righthand
    wait globalTimeout
endif

if jase_lefthand != 0 and not find jase_lefthand self
    // handle crooky 
    hotkey "Grab Item"
    wft 500
    target jase_lefthand
    wait globalTimeout
endif

if jase_onehandedsecondary != 0 and not find jase_onehandedsecondary self
    hotkey "Grab Item"
    wft 500
    target jase_onehandedsecondary
    wait globalTimeout
endif
if jase_innerlegs != 0 and not find jase_innerlegs self
    hotkey "Grab Item"
    wft 500
    target jase_innerlegs
    wait globalTimeout
endif
if jase_outerlegs != 0 and not find jase_outerlegs self
    hotkey "Grab Item"
    wft 500
    target jase_outerlegs
    wait globalTimeout
endif
if jase_outertorso != 0 and not find jase_outertorso self
    hotkey "Grab Item"
    wft 500
    target jase_outertorso
    wait globalTimeout
endif
if jase_cloak != 0 and not find jase_cloak self
    hotkey "Grab Item"
    wft 500
    target jase_cloak
    wait globalTimeout
endif
if jase_arms != 0 and not find jase_arms self
    hotkey "Grab Item"
    wft 500
    target jase_arms
    wait globalTimeout
endif
if jase_earrings != 0 and not find jase_earrings self
    hotkey "Grab Item"
    wft 500
    target jase_earrings
    wait globalTimeout
endif
if jase_middletorso != 0 and not find jase_middletorso self
    hotkey "Grab Item"
    wft 500
    target jase_middletorso
    wait globalTimeout
endif
if jase_face != 0 and not find jase_face self
    hotkey "Grab Item"
    wft 500
    target jase_face
    wait globalTimeout
endif
if jase_bracelet != 0 and not find jase_bracelet self
    hotkey "Grab Item"
    wft 500
    target jase_bracelet
    wait globalTimeout
endif
if jase_innertorso != 0 and not find jase_innertorso self
    hotkey "Grab Item"
    wft 500
    target jase_innertorso
    wait globalTimeout
endif
if jase_waist != 0 and not find jase_waist self
    hotkey "Grab Item"
    wft 500
    target jase_waist
    wait globalTimeout
endif
if jase_neck != 0 and not find jase_neck self
    hotkey "Grab Item"
    wft 500
    target jase_neck
    wait globalTimeout
endif
if jase_talisman != 0 and not find jase_talisman self
    hotkey "Grab Item"
    wft 500
    target jase_talisman
    wait globalTimeout
endif
if jase_ring != 0 and not find jase_ring self
    hotkey "Grab Item"
    wft 500
    target jase_ring
    wait globalTimeout
endif
if jase_gloves != 0 and not find jase_gloves self
    hotkey "Grab Item"
    wft 500
    target jase_gloves
    wait globalTimeout
endif
if jase_quiver != 0 and not find jase_quiver self
    hotkey "Grab Item"
    wft 500
    target jase_quiver
    wait globalTimeout
endif
if jase_head != 0 and not find jase_head self
    hotkey "Grab Item"
    wft 500
    target jase_head
    wait globalTimeout
endif
if jase_outerbody != 0 and not find jase_outerbody self
    hotkey "Grab Item"
    wft 500
    target jase_outerbody
    wait globalTimeout
endif
if jase_shirt != 0 and not find jase_shirt self
    hotkey "Grab Item"
    wft 500
    target jase_shirt
    wait globalTimeout
endif
if jase_pants != 0 and not find jase_pants self
    hotkey "Grab Item"
    wft 500
    target jase_pants
    wait globalTimeout
endif
if jase_shoes != 0 and not find jase_shoes self
    hotkey "Grab Item"
    wft 500
    target jase_shoes
    wait globalTimeout
endif


if find jootbag backpack
    overhead "We got our loot bag!" 88
    dclick jootbag
    wait globalTimeout
    @clearignore 
    while findtype "pouch" backpack 0 as item
        getlabel item desc
        if "(0 items" in desc
            // do nothing
        else
            dclick item
            wait 200
        endif
        @ignore item
    endwhile
    clearignore
endif

if not findlayer self righthand and jase_righthand != 0
    // handle crooky 
    dclick jase_righthand
    wait globalTimeout
endif
if not findlayer self lefthand and jase_lefthand != 0
    // handle crooky 
    dclick jase_lefthand
    wait globalTimeout
endif
if not findlayer self shoes and jase_shoes != 0
    dclick jase_shoes
    wait globalTimeout
endif
if not findlayer self pants and jase_pants != 0
    dclick jase_pants
    wait globalTimeout
endif
if not findlayer self shirt and jase_shirt != 0
    dclick jase_shirt
    wait globalTimeout
endif
if not findlayer self head and jase_head != 0
    dclick jase_head
    wait globalTimeout
endif
if not findlayer self gloves and jase_gloves != 0
    dclick jase_gloves
    wait globalTimeout
endif
if not findlayer self ring and jase_ring != 0
    dclick jase_ring
    wait globalTimeout
endif
if not findlayer self talisman and jase_talisman != 0
    dclick jase_talisman
    wait globalTimeout
endif
if not findlayer self neck and jase_neck != 0
    dclick jase_neck
    wait globalTimeout
endif
if not findlayer self waist and jase_waist != 0
    dclick jase_waist
    wait globalTimeout
endif
if not findlayer self innertorso and jase_innertorso != 0
    dclick jase_innertorso
    wait globalTimeout
endif
if not findlayer self bracelet and jase_bracelet != 0
    dclick jase_bracelet
    wait globalTimeout
endif
if not findlayer self face and jase_face != 0
    dclick jase_face
    wait globalTimeout
endif
if not findlayer self middletorso and jase_middletorso != 0
    dclick jase_middletorso
    wait globalTimeout
endif
if not findlayer self earrings and jase_earrings != 0
    dclick jase_earrings
    wait globalTimeout
endif
if not findlayer self arms and jase_arms != 0
    dclick jase_arms
    wait globalTimeout
endif
if not findlayer self cloak and jase_cloak != 0
    dclick jase_cloak
    wait globalTimeout
endif
if not findlayer self outertorso and jase_outertorso != 0
    dclick jase_outertorso
    wait globalTimeout
endif
if not findlayer self outerlegs and jase_outerlegs != 0
    dclick jase_outerlegs
    wait globalTimeout
endif
if not findlayer self innerlegs and jase_innerlegs != 0
    dclick jase_innerlegs
    wait globalTimeout
endif
if not findlayer self onehandedsecondary and jase_onehandedsecondary != 0
    dclick jase_onehandedsecondary
    wait globalTimeout
endif
if not findlayer self quiver and jase_quiver != 0
    dclick jase_quiver
    wait globalTimeout
endif
if not findlayer self outerbody and jase_outerbody != 0
    overhead "hey satche"
    lift jase_outerbody
    drop self outerbody
    wait globalTimeout
endif


if not findlayer self righthand and jase_righthand != 0
    overhead "Missing righthand" 34
endif
if not findlayer self lefthand and jase_lefthand != 0
    overhead "Missing lefthand" 34
endif
if not findlayer self shoes and jase_shoes != 0
    overhead "Missing shoes" 34
endif
if not findlayer self pants and jase_pants != 0
    overhead "Missing pants" 34
endif
if not findlayer self shirt and jase_shirt != 0
    overhead "Missing shirt" 34
endif
if not findlayer self head and jase_head != 0
    overhead "Missing head" 34
endif
if not findlayer self gloves and jase_gloves != 0
    overhead "Missing gloves" 34
endif
if not findlayer self ring and jase_ring != 0
    overhead "Missing ring" 34
endif
if not findlayer self talisman and jase_talisman != 0
    overhead "Missing talisman" 34
endif
if not findlayer self neck and jase_neck != 0
    overhead "Missing neck" 34
endif
if not findlayer self waist and jase_waist != 0
    overhead "Missing waist" 34
endif
if not findlayer self innertorso and jase_innertorso != 0
    overhead "Missing innertorso" 34
endif
if not findlayer self bracelet and jase_bracelet != 0
    overhead "Missing bracelet" 34
endif
if not findlayer self face and jase_face != 0
    overhead "Missing face" 34
endif
if not findlayer self middletorso and jase_middletorso != 0
    overhead "Missing middletorso" 34
endif
if not findlayer self earrings and jase_earrings != 0
    overhead "Missing earrings" 34
endif
if not findlayer self arms and jase_arms != 0
    overhead "Missing arms" 34
endif
if not findlayer self cloak and jase_cloak != 0
    overhead "Missing cloak" 34
endif
if not findlayer self outertorso and jase_outertorso != 0
    overhead "Missing outertorso" 34
endif
if not findlayer self outerlegs and jase_outerlegs != 0
    overhead "Missing outerlegs" 34
endif
if not findlayer self innerlegs and jase_innerlegs != 0
    overhead "Missing innerlegs" 34
endif
if not findlayer self onehandedsecondary and jase_onehandedsecondary != 0
    overhead "Missing onehandedsecondary" 34
endif
if not findlayer self quiver and jase_quiver != 0
    overhead "Missing quiver" 34
endif
if not findlayer self outerbody and jase_outerbody != 0
    overhead "Missing outerbody" 34
endif


if automaticallyActivateAspect = 1
    
    while not gumpexists 2424293173
        say '[aspect'    
        waitforgump 2424293173 500
    endwhile

    if gumpexists 2424293173
        // weapon
        gumpresponse 8 2424293173
        waitforgump 2424293173 5000
        gumpresponse 8 2424293173
        waitforgump 2424293173 5000
        // mage book
        gumpresponse 13 2424293173
        waitforgump 2424293173 5000
        gumpresponse 13 2424293173
        waitforgump 2424293173 5000
        // armor
        gumpresponse 17 2424293173
        waitforgump 2424293173 5000
        gumpresponse 17 2424293173
        waitforgump 2424293173 5000
        gumpclose 2424293173
    endif

endif